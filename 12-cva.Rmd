---
title: "penAFT.cva"
author: "Anonymous"
date: "August 7th, 2022"
output: 
  html_document:
    toc: true
    number_sections: true
---

```{r Rmd-init, include = FALSE}
## The code in this chunk will be executed, will not appear in rendered .html file

##  Silently sets knitr chunk options used in Rmd file
require(knitr)
knitr::opts_chunk$set(
  collapse = TRUE,
  results = "markup",  
  comment="#>",
  highlight = TRUE,
  fig.width = 12, fig.height=8, fig.path='Figs/'
)

# Silently clears Global environment
rm(list=ls())

# Create .params list  # <- !!! 
.params <- list(vignette_nm = "12-cva"
               ) 

# Silently assign variables for later use
vignette_nm  <- .params$vignette_nm   # .params refers to list defined above
vignette_Rmd <- paste(vignette_nm,".Rmd", sep = "")
vignette_R   <- paste(vignette_nm,".R",   sep = "")
vignette_html<- paste(vignette_nm, ".html",   sep = "")
```

# R session setup


```{r Rsetup}
sessionInfo()
```


* This is `r vignette_nm` vignette that illustrates how to create `cva` object
* Rmd file  `r vignette_Rmd` was executed at `r Sys.time()`
* Note: It takes several minutes to execute this script


```{r load-Rdata}
library(penAFT)
sessionInfo()
load(file = "raw-Rdata/11-mtx.Rdata")
ls()
```

## penAFT.cva 


# Notes: alpha is a numeric vector with values ranging from 0 to 1 
# Setting seed to  constant allows to use the same folds for all elements of alpha
# lambda is null

```{r penAFT-cva, cache=TRUE}
library(cvaUtils)

alpha <- seq(0, 1, len = 11)^3
lmbda <- 10^(seq(3,-5, -0.2))
penAFTcva.en <- penAFT.cva(x=X, logY = logY, delta = delta,
               alpha = alpha,
               nlambda = 50, lambda.ratio.min = 0.1, lambda = lmbda,
               penalty = "EN", nfolds = 5, seed = 123)
class(penAFTcva.en) # "penAFT.cva"
str(penAFTcva.en)
```


Save cva object

```{r save-penAFT-cva}
save(penAFTcva.en,file = "Rdata/12-cva.Rdata")
```
* Rmd file  `r vignette_Rmd` completed execution at `r Sys.time()`

